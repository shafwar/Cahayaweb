import{j as e,L as i,I as l,B as S}from"./app-B0RzerOi.js";import{d as L,u as R,H as F}from"./inertia-DFKzB8kt.js";import{T as N}from"./text-link-Djxr_nJC.js";import{I as m}from"./input-D4O-OW_h.js";import{A as _,L as k}from"./auth-layout-CtraukOw.js";/* empty css            */import"./vendor-DP3lGzMr.js";function z(){const{url:u,props:y}=L(),x=new URLSearchParams(u.split("?")[1]||"").get("mode"),h=new URLSearchParams(u.split("?")[1]||"").get("redirect"),g=y?.status,{data:r,setData:o,post:C,processing:t,errors:s,reset:P}=R({name:"",email:"",password:"",password_confirmation:""}),I=a=>{a.preventDefault();const b=document.querySelector('meta[name="csrf-token"]')?.content;b&&typeof window<"u"&&window.axios&&(window.axios.defaults.headers.common["X-CSRF-TOKEN"]=b);const w=new URLSearchParams(window.location.search),f=w.get("mode"),j=w.get("redirect");let d=route("register",{},!0);const n=new URLSearchParams;f&&n.set("mode",f),j&&n.set("redirect",j),n.toString()&&(d+="?"+n.toString()),typeof window<"u"&&window.location.protocol==="https:"&&(d=d.replace(/^http:/,"https:")),C(d,{preserveState:!1,preserveScroll:!1,onError:v=>{console.error("Registration errors:",v);const c=Object.keys(v)[0];if(c){const p=document.getElementById(c)||document.querySelector(`[name="${c}"]`);p&&(p.scrollIntoView({behavior:"smooth",block:"center"}),p.focus())}},onSuccess:()=>{},onFinish:()=>{P("password","password_confirmation")}})};return e.jsxs(_,{title:"Create an account",description:"Enter your details below to create your account",children:[e.jsx(F,{title:"Register"}),g&&e.jsx("div",{className:"mb-4 rounded-lg border border-green-500/30 bg-green-500/10 p-3",children:e.jsx("p",{className:"text-sm text-green-300",children:g})}),e.jsxs("form",{method:"POST",className:"flex flex-col gap-6",onSubmit:I,children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"name",children:"Name"}),e.jsx(m,{id:"name",type:"text",required:!0,autoFocus:!0,tabIndex:1,autoComplete:"name",value:r.name,onChange:a=>o("name",a.target.value),disabled:t,placeholder:"Full name"}),e.jsx(l,{message:s.name,className:"mt-2"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"email",children:"Email address"}),e.jsx(m,{id:"email",type:"email",required:!0,tabIndex:2,autoComplete:"email",value:r.email,onChange:a=>o("email",a.target.value),disabled:t,placeholder:"email@example.com",className:s.email&&s.email.includes("already registered")?"border-red-500 focus:border-red-500 focus:ring-red-500":""}),e.jsx(l,{message:s.email}),s.email&&(s.email.includes("already registered")||s.email.includes("already been taken")||s.email.includes("unique"))&&e.jsx("div",{className:"mt-2 rounded-lg border-2 border-amber-500/50 bg-amber-500/20 p-4 shadow-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5 flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-amber-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 text-sm font-semibold text-amber-300",children:"Email Already Registered"}),e.jsxs("p",{className:"text-sm leading-relaxed text-amber-200/90",children:["The email address ",e.jsx("strong",{className:"font-semibold text-amber-100",children:r.email})," is already registered in our system."]}),e.jsxs("p",{className:"mt-2 text-sm text-amber-200/90",children:["If this is your account, please"," ",e.jsx(N,{href:route("login",x==="b2b"?{mode:"b2b",redirect:h}:{}),className:"font-semibold text-amber-100 underline hover:text-amber-50",children:"log in here"})," ","instead. If you forgot your password, you can reset it from the login page."]})]})]})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"password",children:"Password"}),e.jsx(m,{id:"password",type:"password",required:!0,tabIndex:3,autoComplete:"new-password",value:r.password,onChange:a=>o("password",a.target.value),disabled:t,placeholder:"Password (minimum 8 characters)",minLength:8}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(l,{message:s.password}),!s.password&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Password must be at least 8 characters long."})]}),r.password&&r.password.length>0&&r.password.length<8&&e.jsx("div",{className:"mt-1 rounded-lg border border-amber-500/30 bg-amber-500/10 p-2",children:e.jsxs("p",{className:"text-xs text-amber-300",children:[e.jsx("strong",{children:"Password too short:"})," Your password must be at least 8 characters. Currently: ",r.password.length," character",r.password.length!==1?"s":"","."]})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"password_confirmation",children:"Confirm password"}),e.jsx(m,{id:"password_confirmation",type:"password",required:!0,tabIndex:4,autoComplete:"new-password",value:r.password_confirmation,onChange:a=>o("password_confirmation",a.target.value),disabled:t,placeholder:"Confirm password"}),e.jsx(l,{message:s.password_confirmation}),r.password&&r.password_confirmation&&r.password!==r.password_confirmation&&e.jsx("div",{className:"mt-1 rounded-lg border border-red-500/30 bg-red-500/10 p-2",children:e.jsxs("p",{className:"text-xs text-red-300",children:[e.jsx("strong",{children:"Passwords do not match."})," Please make sure both password fields contain the same password."]})})]}),e.jsx(S,{type:"submit",className:"mt-2 w-full",tabIndex:5,disabled:t,children:t?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating account..."]}):"Create account"})]}),s&&Object.keys(s).length>0&&!s.name&&!s.email&&!s.password&&!s.password_confirmation&&e.jsx("div",{className:"rounded-lg border border-red-500/30 bg-red-500/10 p-3",children:e.jsx("p",{className:"text-sm text-red-300",children:"Please check the form for errors and try again."})}),e.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Already have an account?"," ",e.jsx(N,{href:route("login",x==="b2b"?{mode:"b2b",redirect:h}:{}),tabIndex:6,children:"Log in"})]})]})]})}export{z as default};
