let i=!1;function a(){if(i){console.warn("Logout already in progress");return}i=!0;try{const e=document.querySelector('meta[name="csrf-token"]')?.content;if(!e){console.warn("No CSRF token found in meta tag, trying to get from cookie...");const t=document.cookie.split(";");let o=null;for(const n of t){const[r,c]=n.trim().split("=");if(r==="XSRF-TOKEN"){o=decodeURIComponent(c);break}}if(!o){console.warn("No CSRF token available, redirecting to home"),window.location.href="/",i=!1;return}l(o);return}l(e)}catch(e){console.error("Logout error:",e),i=!1,window.location.href="/"}}function l(e){try{let t="/logout";typeof window<"u"&&window.location.protocol==="https:"&&(t=window.location.origin+"/logout");const o=document.createElement("form");o.method="POST",o.action=t,o.style.display="none";const n=document.createElement("input");n.type="hidden",n.name="_token",n.value=e;const r=document.createElement("input");r.type="hidden",r.name="_method",r.value="POST",o.appendChild(n),o.appendChild(r),document.body.appendChild(o),o.submit(),setTimeout(()=>{i=!1},2e3)}catch(t){console.error("Form logout error:",t),i=!1,window.location.href="/"}}export{a as l};
