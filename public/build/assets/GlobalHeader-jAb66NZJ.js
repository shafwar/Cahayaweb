import{j as e,A as k,m as d}from"./framer-motion-B-VyjaWK.js";import{d as M,r,L as E,b as v}from"./inertia-DnB9r-Z9.js";import{g as S}from"./imageHelper-DKYo5vcR.js";import{l as B}from"./logout-ChJA0uHM.js";import{r as G}from"./radix-ui-BGF_4iPy.js";import{a0 as O,y as Y,B as L,w as U,e as W,$,x as V,v as q,a1 as F,O as H,R as P,S as I,a2 as T,_ as D,a3 as X,L as R,a4 as _,a5 as J,X as C,h as K}from"./lucide-BFbptF3M.js";const z=r.createContext(null);function A(){const i=r.useContext(z);if(!i)throw new Error("useEditMode must be used within EditModeProvider");return i}function le({children:i}){const h=!!M().props?.auth?.user?.is_admin,[x,y]=r.useState(!1),[u,p]=r.useState(!1),f=r.useCallback(()=>p(!0),[]),m=r.useCallback(()=>p(!1),[]);r.useEffect(()=>{h||y(!1)},[h]);const w=r.useMemo(()=>({isAdmin:h,editMode:x,setEditMode:y,dirty:u,markDirty:f,clearDirty:m}),[h,x,u,f,m]);return r.useEffect(()=>{const o=document.documentElement;x?o.classList.add("cms-edit"):o.classList.remove("cms-edit"),window.dispatchEvent(new CustomEvent("cms:mode",{detail:{editMode:x}}))},[x]),r.useEffect(()=>{const o=()=>{console.log("ðŸ“¢ Global event: cms:mark-dirty received"),f()},t=()=>{console.log("ðŸ“¢ Global event: cms:clear-dirty received"),m()};return window.addEventListener("cms:mark-dirty",o),window.addEventListener("cms:clear-dirty",t),()=>{window.removeEventListener("cms:mark-dirty",o),window.removeEventListener("cms:clear-dirty",t)}},[f,m]),e.jsxs(z.Provider,{value:w,children:[i,e.jsx(k,{children:h&&e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"pointer-events-none fixed inset-x-0 top-0 z-[9998]",children:x&&e.jsx("div",{className:"mx-auto mt-2 w-fit rounded-full bg-blue-500/10 px-4 py-1 text-xs text-blue-300 ring-1 ring-blue-500/40",children:"Edit Mode Active"})})}),e.jsx(k,{children:h&&x&&u&&e.jsx(d.button,{initial:{y:80,opacity:0},animate:{y:0,opacity:1},exit:{y:80,opacity:0},transition:{type:"spring",stiffness:300,damping:26},onClick:()=>{m()},className:"fixed right-6 bottom-6 z-[9999] rounded-full bg-amber-500 px-5 py-3 text-sm font-semibold text-black shadow-lg ring-1 ring-amber-300/60 hover:bg-amber-400",children:"Publish Changes"})})]})}const Z=[{label:"Home",href:"/home",icon:"Home"},{label:"About Us",href:"/about",icon:"Info"},{label:"Destinations",href:"/destinations",icon:"MapPin",hasDropdown:!0},{label:"Packages",href:"/packages",icon:"Box",hasDropdown:!0},{label:"Highlights",href:"/highlights",icon:"Sparkles"},{label:"Contact",href:"/contact",icon:"Phone"}],Q=[{label:"Home",href:"/b2b",icon:"Home"},{label:"Packages",href:"#packages",icon:"Briefcase",action:"open-b2b-packages"},{label:"Consultation",href:"#consultation",icon:"Phone",action:"open-consultation"},{label:"WhatsApp",href:"https://wa.me/6281234567890",icon:"MessageCircle",external:!0}],ee=({isOpen:i,onClose:a,variant:j,navigationItems:h,iconMap:x,user:y,isAdmin:u,editCtx:p,searchQuery:f,setSearchQuery:m,handleSearchSubmit:w,handleModeSwitch:o})=>(r.useEffect(()=>(i?(document.body.style.overflow="hidden",document.body.style.paddingRight="0px"):(document.body.style.overflow="",document.body.style.paddingRight=""),()=>{document.body.style.overflow="",document.body.style.paddingRight=""}),[i]),i?G.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[99999] lg:hidden",style:{position:"fixed",top:0,left:0,right:0,bottom:0},children:[e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:a,className:"absolute inset-0 bg-black/90 backdrop-blur-md",style:{position:"absolute",top:0,left:0,right:0,bottom:0}}),e.jsx(d.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:"absolute top-0 right-0 h-full w-80 overflow-y-auto bg-gradient-to-b from-black to-slate-950 shadow-2xl sm:w-96",style:{position:"absolute",top:0,right:0,height:"100vh",maxHeight:"100vh",overflowY:"auto",overflowX:"hidden"},children:e.jsxs("div",{className:"flex min-h-full flex-col",style:{minHeight:"100vh"},children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-white/5 p-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:S("/cahayanbiyalogo.png"),alt:"Logo",className:"h-10 w-auto",onError:t=>{const n=t.currentTarget;if(n.src&&n.src.includes("assets.cahayaanbiya.com")){const l=n.src;let g=l;l.includes("/public/images/")?g=l.replace("/public/images/","/images/"):l.includes("/public/")?g=l.replace("/public/","/"):l.includes("/images/")?g=l.replace("/images/","/public/images/"):g="https://assets.cahayaanbiya.com/public/images/cahayanbiyalogo.png",console.log("[Logo] Trying alternative R2 path:",g),n.src=g}}}),e.jsxs("div",{children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-200 to-amber-100 bg-clip-text text-base font-bold text-transparent",children:"CAHAYA ANBIYA"}),e.jsx("div",{className:"text-xs text-white/60",children:"TRAVEL AGENCY"})]})]}),e.jsx("button",{onClick:a,className:"flex h-10 w-10 items-center justify-center rounded-xl bg-white/5 text-white hover:bg-white/10",children:e.jsx(C,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"border-b border-white/5 p-5",children:e.jsx("button",{onClick:()=>{o(),a()},className:`w-full rounded-xl px-4 py-3 text-sm font-semibold ${j==="b2b"?"border border-amber-500/30 bg-amber-500/10 text-amber-300":"border border-white/10 bg-white/5 text-white"}`,children:j==="b2b"?"Switch to B2C":"Switch to B2B"})}),e.jsx("div",{className:"border-b border-white/5 p-5",children:e.jsxs("form",{onSubmit:w,className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("div",{className:"absolute top-1/2 left-3 -translate-y-1/2",children:e.jsx(K,{className:"h-4 w-4 text-amber-500/60"})}),e.jsx("input",{type:"text",value:f,onChange:t=>m(t.target.value),placeholder:"Search destinations, packages, or locations...",className:"w-full rounded-lg border border-white/10 bg-white/5 py-2.5 pr-3 pl-10 text-sm text-white placeholder:text-white/40 focus:border-amber-500/50 focus:bg-white/10 focus:ring-1 focus:ring-amber-500/30 focus:outline-none"}),f&&e.jsx("button",{type:"button",onClick:()=>m(""),className:"absolute top-1/2 right-2 -translate-y-1/2 rounded p-1 text-white/40 transition-colors hover:bg-white/10 hover:text-white/70",children:e.jsx(C,{className:"h-3.5 w-3.5"})})]}),e.jsx("button",{type:"submit",disabled:!f.trim(),className:"rounded-lg bg-amber-500 px-5 py-2.5 text-sm font-semibold text-white transition-all hover:bg-amber-400 active:scale-95 disabled:cursor-not-allowed disabled:opacity-40",children:"Search"})]})}),e.jsx("nav",{className:"p-5",style:{flex:"1 1 auto",minHeight:0},children:e.jsx("div",{className:"space-y-2",children:h.map(t=>{const n=t.icon?x[t.icon]:null,l=t;return l.action?e.jsxs("button",{onClick:()=>{l.action==="open-b2b-packages"?window.dispatchEvent(new Event("open-b2b-packages")):l.action==="open-consultation"&&document.querySelector("[data-consultation-trigger]")?.click(),a()},className:"flex w-full items-center gap-3 rounded-xl px-4 py-3.5 text-sm font-medium text-white hover:bg-white/5",children:[n&&e.jsx(n,{className:"h-5 w-5"}),e.jsx("span",{children:t.label})]},t.label):l.external?e.jsxs("a",{href:t.href,target:"_blank",rel:"noreferrer",onClick:a,className:"flex items-center gap-3 rounded-xl px-4 py-3.5 text-sm font-medium text-white hover:bg-white/5",children:[n&&e.jsx(n,{className:"h-5 w-5"}),e.jsx("span",{children:t.label})]},t.label):e.jsxs(E,{href:t.href,onClick:a,className:"flex items-center gap-3 rounded-xl px-4 py-3.5 text-sm font-medium text-white hover:bg-white/5",children:[n&&e.jsx(n,{className:"h-5 w-5"}),e.jsx("span",{children:t.label})]},t.label)})})}),y&&u&&e.jsxs("div",{className:"border-t border-white/5 bg-gradient-to-b from-transparent to-black/50 p-5",children:[e.jsx("div",{className:"mb-3 text-xs font-semibold tracking-wider text-amber-400/80 uppercase",children:"Admin CMS"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>{v.visit("/admin"),a()},className:"flex w-full items-center gap-3 rounded-xl border border-amber-500/30 bg-gradient-to-r from-amber-500/10 to-orange-500/10 px-4 py-3 text-sm font-medium text-amber-300",children:[e.jsx(H,{className:"h-5 w-5"}),e.jsx("span",{children:"Admin Dashboard"})]}),e.jsxs("button",{onClick:()=>{v.visit("/admin/restore-center"),a()},className:"flex w-full items-center gap-3 rounded-xl border border-purple-500/30 bg-gradient-to-r from-purple-500/10 to-pink-500/10 px-4 py-3 text-sm font-medium text-purple-300",children:[e.jsx(P,{className:"h-5 w-5"}),e.jsx("span",{children:"Restore Center"})]}),e.jsxs("button",{onClick:()=>{v.visit("/admin/agent-verifications"),a()},className:"flex w-full items-center gap-3 rounded-xl border border-amber-500/30 bg-gradient-to-r from-amber-500/10 to-orange-500/10 px-4 py-3 text-sm font-medium text-amber-300",children:[e.jsx(L,{className:"h-5 w-5"}),e.jsx("span",{children:"Agent Verifications"})]}),p.dirty?e.jsxs("button",{onClick:t=>{t.stopPropagation(),window.confirm("ðŸ’¾ Save all changes?")&&(window.dispatchEvent(new CustomEvent("cms:flush-save")),p.clearDirty?.(),v.reload({only:["sections"]}),a())},className:"flex w-full animate-pulse items-center gap-3 rounded-xl bg-gradient-to-r from-amber-500 to-orange-500 px-4 py-3 text-sm font-bold text-white",children:[e.jsx(I,{className:"h-5 w-5"}),e.jsx("span",{children:"Save Changes"})]}):p.editMode?e.jsxs("button",{onClick:()=>{p.setEditMode(!1),a()},className:"flex w-full items-center gap-3 rounded-xl border border-blue-500/30 bg-blue-500/10 px-4 py-3 text-sm font-medium text-blue-300",children:[e.jsx(T,{className:"h-5 w-5"}),e.jsx("span",{children:"Exit Editing"})]}):e.jsxs("button",{onClick:()=>{p.setEditMode(!0),a()},className:"flex w-full items-center gap-3 rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-sm font-medium text-white",children:[e.jsx(D,{className:"h-5 w-5"}),e.jsx("span",{children:"Start Editing"})]})]})]}),e.jsxs("div",{className:"border-t border-white/5 p-5",children:[j==="b2b"&&!u&&(y?e.jsxs("button",{onClick:()=>{B(),a()},className:"mb-4 flex w-full items-center justify-center gap-2 rounded-xl border border-red-500/30 bg-red-500/10 px-4 py-3 text-sm font-semibold text-red-300",children:[e.jsx(R,{className:"h-4 w-4"}),"Logout"]}):e.jsxs("a",{href:"/login?mode=b2b&redirect=/b2b",className:"mb-4 flex w-full items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-amber-500 to-orange-500 px-4 py-3 text-sm font-semibold text-white",onClick:a,children:[e.jsx(_,{className:"h-4 w-4"}),"Login"]})),e.jsx("p",{className:"text-center text-xs text-white/40",children:"Â© 2024 Cahaya Anbiya Travel"})]})]})})]}),document.body):null),ce=({variant:i="b2c",className:a=""})=>{const[j,h]=r.useState(!1),[x,y]=r.useState(!1),[u,p]=r.useState(""),m=M().props?.auth?.user;let w=!1;try{w=A().isAdmin}catch{w=!!m?.is_admin}const o=(()=>{try{return A()}catch{return{editMode:!1,setEditMode:()=>{},clearDirty:()=>{}}}})(),t=i==="b2c"?Z:Q,n={Home:F,Info:q,MapPin:V,Box:$,Sparkles:W,Phone:U,Building2:L,Briefcase:Y,MessageCircle:O},l=s=>{s.preventDefault(),u.trim()&&(window.location.href=`/search?q=${encodeURIComponent(u.trim())}`)};r.useEffect(()=>{const s=()=>{y(window.scrollY>50)};return window.addEventListener("scroll",s,{passive:!0}),()=>window.removeEventListener("scroll",s)},[]),r.useEffect(()=>{const s=()=>{window.innerWidth>=1024&&h(!1)};return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const g=()=>{v.visit(route("home"))};return e.jsxs(e.Fragment,{children:[e.jsx(d.header,{initial:{y:-100},animate:{y:0},transition:{duration:.6,ease:[.22,1,.36,1]},className:`sticky top-0 z-[9999] ${a}`,style:{background:"linear-gradient(180deg, rgba(0,0,0,0.98) 0%, rgba(0,0,0,0.95) 100%)",backdropFilter:"blur(12px)",borderBottom:x?"1px solid rgba(254, 201, 1, 0.1)":"1px solid transparent",transition:"border-color 0.3s ease"},children:e.jsx("div",{className:"mx-auto h-20 max-w-7xl px-4 lg:px-6",children:e.jsxs("div",{className:"flex h-full items-center justify-between gap-4",children:[e.jsx(E,{href:i==="b2c"?"/home":"/b2b",className:"group flex flex-shrink-0 items-center gap-3","aria-label":"Cahaya Anbiya Home",children:e.jsxs(d.div,{whileHover:{scale:1.05},transition:{duration:.3},className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-amber-500/20 to-orange-500/20 blur-xl transition-all duration-500 group-hover:from-amber-500/30 group-hover:to-orange-500/30"}),e.jsx("img",{src:S("/cahayanbiyalogo.png"),alt:"Cahaya Anbiya Logo",className:"relative h-10 w-auto transition-transform duration-300 group-hover:rotate-3 lg:h-11",onError:s=>{const N=s.currentTarget;if(N.src&&N.src.includes("assets.cahayaanbiya.com")){const c=N.src;let b=c;c.includes("/public/images/")?b=c.replace("/public/images/","/images/"):c.includes("/public/")?b=c.replace("/public/","/"):c.includes("/images/")?b=c.replace("/images/","/public/images/"):b="https://assets.cahayaanbiya.com/public/images/cahayanbiyalogo.png",console.log("[Logo] Trying alternative R2 path:",b),N.src=b}}})]}),e.jsxs("div",{className:"hidden sm:block",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-200 via-amber-100 to-amber-200 bg-clip-text text-sm leading-tight font-bold text-transparent lg:text-base",children:"CAHAYA ANBIYA"}),e.jsx("div",{className:"mt-0.5 text-xs leading-tight font-medium text-white/70",children:"WISATA INDONESIA"})]})]})}),e.jsx("nav",{className:"hidden flex-1 items-center justify-center gap-1 lg:flex",children:t.map((s,N)=>{const c=s.icon?n[s.icon]:null,b=s;return e.jsx(d.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:N*.05,duration:.4},children:b.action?e.jsxs("button",{onClick:()=>{b.action==="open-b2b-packages"?window.dispatchEvent(new Event("open-b2b-packages")):b.action==="open-consultation"&&document.querySelector("[data-consultation-trigger]")?.click()},className:"group flex items-center gap-2 rounded-xl px-4 py-2.5 text-sm font-medium text-white/90 transition-all duration-300 hover:bg-white/5 hover:text-white",children:[c&&e.jsx(c,{className:"h-4 w-4"}),e.jsx("span",{children:s.label})]}):b.external?e.jsxs("a",{href:s.href,target:"_blank",rel:"noreferrer",className:"group flex items-center gap-2 rounded-xl px-4 py-2.5 text-sm font-medium text-white/90 transition-all duration-300 hover:bg-white/5 hover:text-white",children:[c&&e.jsx(c,{className:"h-4 w-4"}),e.jsx("span",{children:s.label})]}):e.jsxs(E,{href:s.href,className:"group flex items-center gap-2 rounded-xl px-4 py-2.5 text-sm font-medium text-white/90 transition-all duration-300 hover:bg-white/5 hover:text-white",children:[c&&e.jsx(c,{className:"h-4 w-4"}),e.jsx("span",{children:s.label})]})},s.label)})}),e.jsxs("div",{className:"flex flex-shrink-0 items-center gap-2",children:[m&&w&&e.jsxs(e.Fragment,{children:[e.jsx(d.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>v.visit("/admin"),className:"hidden items-center justify-center rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 to-orange-500/10 p-2 text-amber-300 transition-all hover:from-amber-500/20 hover:to-orange-500/20 md:flex",title:"Admin Dashboard",children:e.jsx(H,{className:"h-4 w-4"})}),e.jsxs(d.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>v.visit("/admin/restore-center"),className:"hidden items-center gap-2 rounded-xl border border-purple-500/30 bg-gradient-to-r from-purple-500/10 to-pink-500/10 px-3 py-2 text-sm font-semibold text-purple-300 transition-all hover:from-purple-500/20 hover:to-pink-500/20 md:flex",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden lg:inline",children:"Restore"})]}),e.jsx(k,{mode:"wait",children:o.dirty?e.jsxs(d.button,{initial:{scale:.8},animate:{scale:1},exit:{scale:.8},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:s=>{s.stopPropagation(),window.confirm("ðŸ’¾ Save all changes?")&&(window.dispatchEvent(new CustomEvent("cms:flush-save")),o.clearDirty?.(),v.reload({only:["sections"]}))},className:"hidden animate-pulse items-center gap-2 rounded-xl bg-gradient-to-r from-amber-500 to-orange-500 px-3 py-2 text-sm font-bold text-white shadow-lg ring-2 ring-amber-400/50 transition-all hover:from-amber-400 hover:to-orange-400 md:flex",children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx("span",{children:"Save"})]},"save"):o.editMode?e.jsxs(d.button,{initial:{scale:.8},animate:{scale:1},exit:{scale:.8},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o.setEditMode(!1),className:"hidden items-center gap-2 rounded-xl border border-blue-500/30 bg-blue-500/10 px-3 py-2 text-sm font-semibold text-blue-300 transition-all hover:bg-blue-500/20 md:flex",children:[e.jsx(T,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden lg:inline",children:"Editing"})]},"editing"):e.jsxs(d.button,{initial:{scale:.8},animate:{scale:1},exit:{scale:.8},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o.setEditMode(!0),className:"hidden items-center gap-2 rounded-xl border border-white/10 bg-white/5 px-3 py-2 text-sm font-semibold text-white transition-all hover:bg-white/10 md:flex",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden lg:inline",children:"Edit"})]},"edit")})]}),e.jsx(d.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:g,className:`hidden rounded-xl px-3 py-2 text-sm font-semibold md:flex ${i==="b2b"?"border border-amber-500/30 bg-amber-500/10 text-amber-300 hover:bg-amber-500/20":"border border-white/10 bg-white/5 text-white hover:bg-white/10"}`,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"hidden lg:inline",children:i==="b2b"?"B2B":"B2C"}),e.jsx(X,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden lg:inline",children:i==="b2b"?"B2C":"B2B"})]})}),i==="b2b"&&!w&&(m?e.jsx(d.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(),className:"hidden rounded-xl border border-red-500/30 bg-red-500/10 px-3 py-2 text-sm font-semibold text-red-300 hover:bg-red-500/20 md:flex",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{children:"Logout"})]})}):e.jsxs("a",{href:"/login?mode=b2b&redirect=/b2b",className:"hidden items-center gap-2 rounded-xl border-none bg-gradient-to-r from-amber-500 to-orange-500 px-3 py-2 text-sm font-semibold text-white hover:from-amber-400 hover:to-orange-400 md:flex",children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("span",{children:"Login"})]})),e.jsx("button",{onClick:()=>h(!0),className:"flex h-10 w-10 items-center justify-center rounded-xl bg-white/5 text-white transition-all hover:bg-white/10 lg:hidden","aria-label":"Open mobile menu",children:e.jsx(J,{className:"h-5 w-5"})})]})]})})}),e.jsx(k,{children:j&&e.jsx(ee,{isOpen:j,onClose:()=>h(!1),variant:i,navigationItems:t,iconMap:n,user:m,isAdmin:w,editCtx:o,searchQuery:u,setSearchQuery:p,handleSearchSubmit:l,handleModeSwitch:g})})]})};export{le as E,ce as G,A as u};
