import{j as e,A as B,m as H}from"./framer-motion-D9Ds6MjR.js";import{r as l,H as O,b as G,a as b}from"./inertia-D2QVZ4Tm.js";import{P as _,g as q}from"./app-BsG2w8LU.js";import{n as z,R as N,N as E,J as L,K as Q,X as D,x as v,y as k,T as J,k as K,O as V,G as X}from"./lucide-CmpPQWiQ.js";import"./vendor-DP3lGzMr.js";/* empty css            */import"./radix-ui-CoelwvIk.js";function le(){const[o,S]=l.useState([]),[j,C]=l.useState(!0),[p,m]=l.useState(!1),[y,r]=l.useState(null),[u,P]=l.useState(""),[h,U]=l.useState("all"),[x,w]=l.useState("all"),f=async()=>{C(!0);try{const s=await b.get("/admin/get-all-changes");S(s.data.changes||[])}catch(s){console.error("Failed to fetch changes:",s);let a="Unknown error";if(s&&typeof s=="object"&&"response"in s){const t=s;a=t.response?.data?.message||t.message||"Unknown error"}else s instanceof Error&&(a=s.message);r({status:"error",message:"Failed to load changes: "+a})}finally{C(!1)}};l.useEffect(()=>{f()},[]);const R=l.useMemo(()=>{const s=new Set(o.map(a=>a.page));return Array.from(s).sort()},[o]),T=l.useMemo(()=>o.filter(s=>{if(u){const a=u.toLowerCase();if(!`${s.page} ${s.section} ${s.field} ${s.key} ${s.content||""}`.toLowerCase().includes(a))return!1}return!(h!=="all"&&s.page.toLowerCase()!==h.toLowerCase()||x!=="all"&&s.type!==x)}),[o,u,h,x]),$=l.useMemo(()=>{const s={};return T.forEach(a=>{s[a.page]||(s[a.page]=[]),s[a.page].push(a)}),s},[T]),n=l.useMemo(()=>{const s=o.filter(t=>t.type==="text").length,a=o.filter(t=>t.type==="image").length;return{total:o.length,text:s,image:a}},[o]),F=async(s,a)=>{if(confirm(`Reset "${a}"?

This will restore this item to its original default value.`)){m(!0),r(null);try{await b.post("/admin/reset-to-default",{key:s}),r({status:"success",message:`âœ… ${a} reset successfully!`}),await f(),setTimeout(()=>r(null),3e3)}catch(t){let i="Unknown error";if(t&&typeof t=="object"&&"response"in t){const d=t;i=d.response?.data?.message||d.message||"Unknown error"}else t instanceof Error&&(i=t.message);r({status:"error",message:`âŒ Failed: ${i}`})}finally{m(!1)}}},M=async s=>{if(confirm(`Reset ALL changes in ${s} page?

This will restore everything in this page to original defaults.`)){m(!0),r(null);try{await b.post("/admin/reset-by-page",{page:s.toLowerCase()}),r({status:"success",message:`âœ… All ${s} page changes reset successfully!`}),await f(),setTimeout(()=>r(null),3e3)}catch(a){let t="Unknown error";if(a&&typeof a=="object"&&"response"in a){const i=a;t=i.response?.data?.message||i.message||"Unknown error"}else a instanceof Error&&(t=a.message);r({status:"error",message:`âŒ Failed: ${t}`})}finally{m(!1)}}},A=async s=>{if(confirm(`Reset ALL ${s} changes across entire website?

This will restore all ${s} modifications to original defaults.`)){m(!0),r(null);try{await b.post("/admin/reset-by-type",{type:s}),r({status:"success",message:`âœ… All ${s} changes reset successfully!`}),await f(),setTimeout(()=>r(null),3e3)}catch(a){let t="Unknown error";if(a&&typeof a=="object"&&"response"in a){const i=a;t=i.response?.data?.message||i.message||"Unknown error"}else a instanceof Error&&(t=a.message);r({status:"error",message:`âŒ Failed: ${t}`})}finally{m(!1)}}},I=async()=>{if(confirm(`âš ï¸ RESET ALL CHANGES?

This will restore EVERYTHING on your website to original defaults.

Are you absolutely sure?`)&&confirm(`ðŸš¨ FINAL CONFIRMATION

This action will delete ALL customizations:
â€¢ All text changes
â€¢ All image uploads
â€¢ Everything across all pages

This cannot be undone easily. Continue?`)){m(!0),r(null);try{await b.post("/admin/reset-all-changes"),r({status:"success",message:"âœ… All changes reset successfully! Redirecting..."}),setTimeout(()=>{window.location.href="/home?t="+Date.now()},2e3)}catch(s){let a="Unknown error";if(s&&typeof s=="object"&&"response"in s){const t=s;a=t.response?.data?.message||t.message||"Unknown error"}else s instanceof Error&&(a=s.message);r({status:"error",message:`âŒ Failed: ${a}`}),m(!1)}}};return e.jsxs(_,{children:[e.jsx(O,{title:"Restore Center - Admin"}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black py-6 px-3 sm:py-8 sm:px-4 md:py-12 md:px-6 lg:px-8",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("button",{onClick:()=>G.visit("/home"),className:"mb-3 flex items-center gap-2 text-sm text-gray-400 transition-colors hover:text-white sm:mb-4 sm:text-base",children:[e.jsx(z,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Back to Home"})]}),e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"flex items-center gap-3 text-2xl font-bold text-white sm:text-3xl md:text-4xl",children:[e.jsx(N,{className:"h-6 w-6 sm:h-7 sm:w-7 md:h-8 md:w-8 text-purple-400"}),"Restore Center"]}),e.jsx("p",{className:"mt-2 text-sm text-gray-400 md:text-base",children:"Complete control over all website changes - restore any text or image to original"})]}),e.jsxs("button",{onClick:f,disabled:j,className:"flex w-full items-center justify-center gap-2 rounded-lg bg-blue-500/20 px-4 py-2.5 text-sm text-blue-400 transition-all hover:bg-blue-500/30 disabled:opacity-50 md:w-auto md:py-2",children:[e.jsx(E,{className:`h-4 w-4 ${j?"animate-spin":""}`}),"Refresh"]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-3 sm:gap-4 md:grid-cols-4",children:[e.jsxs("div",{className:"rounded-lg bg-blue-500/10 p-3 sm:p-4",children:[e.jsx("div",{className:"text-xl font-bold text-blue-400 sm:text-2xl",children:n.total}),e.jsx("div",{className:"text-xs text-gray-400 sm:text-sm",children:"Total Changes"})]}),e.jsxs("div",{className:"rounded-lg bg-purple-500/10 p-3 sm:p-4",children:[e.jsx("div",{className:"text-xl font-bold text-purple-400 sm:text-2xl",children:n.text}),e.jsx("div",{className:"text-xs text-gray-400 sm:text-sm",children:"Text Changes"})]}),e.jsxs("div",{className:"rounded-lg bg-pink-500/10 p-3 sm:p-4",children:[e.jsx("div",{className:"text-xl font-bold text-pink-400 sm:text-2xl",children:n.image}),e.jsx("div",{className:"text-xs text-gray-400 sm:text-sm",children:"Image Changes"})]}),e.jsxs("div",{className:"rounded-lg bg-green-500/10 p-3 sm:p-4",children:[e.jsx("div",{className:"text-xl font-bold text-green-400 sm:text-2xl",children:R.length}),e.jsx("div",{className:"text-xs text-gray-400 sm:text-sm",children:"Pages Modified"})]})]})]}),e.jsx(B,{children:y&&e.jsx(H.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`mb-4 rounded-lg p-3 sm:mb-6 sm:p-4 ${y.status==="success"?"bg-green-500/20 border border-green-500/30 text-green-400":"bg-red-500/20 border border-red-500/30 text-red-400"}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex flex-1 items-start gap-2 sm:items-center sm:gap-3",children:[y.status==="success"?e.jsx(L,{className:"h-4 w-4 flex-shrink-0 sm:h-5 sm:w-5"}):e.jsx(Q,{className:"h-4 w-4 flex-shrink-0 sm:h-5 sm:w-5"}),e.jsx("span",{className:"text-xs leading-relaxed sm:text-sm",children:y.message})]}),e.jsx("button",{onClick:()=>r(null),className:"flex-shrink-0 text-gray-400 hover:text-white",children:e.jsx(D,{className:"h-4 w-4"})})]})})}),e.jsx("div",{className:"mb-6 rounded-xl border border-red-500/30 bg-red-500/10 p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-lg font-bold text-white sm:text-xl",children:"ðŸ”¥ Bulk Reset Actions"}),e.jsx("p",{className:"mt-1 text-xs text-gray-400 sm:text-sm",children:"Reset multiple items at once or restore entire website to defaults"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-3 md:flex md:flex-wrap",children:[e.jsxs("button",{onClick:()=>A("text"),disabled:p||n.text===0,className:"flex items-center justify-center gap-2 rounded-lg bg-purple-500 px-3 py-2.5 text-xs font-semibold text-white transition-all hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed sm:px-4 sm:text-sm",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsxs("span",{className:"whitespace-nowrap",children:["Reset Text (",n.text,")"]})]}),e.jsxs("button",{onClick:()=>A("image"),disabled:p||n.image===0,className:"flex items-center justify-center gap-2 rounded-lg bg-pink-500 px-3 py-2.5 text-xs font-semibold text-white transition-all hover:bg-pink-600 disabled:opacity-50 disabled:cursor-not-allowed sm:px-4 sm:text-sm",children:[e.jsx(k,{className:"h-4 w-4"}),e.jsxs("span",{className:"whitespace-nowrap",children:["Reset Images (",n.image,")"]})]}),e.jsxs("button",{onClick:I,disabled:p||n.total===0,className:"flex items-center justify-center gap-2 rounded-lg bg-red-500 px-3 py-2.5 text-xs font-semibold text-white transition-all hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed sm:col-span-3 sm:px-4 sm:text-sm md:col-span-1",children:[e.jsx(J,{className:"h-4 w-4"}),e.jsxs("span",{className:"whitespace-nowrap",children:["Reset Everything (",n.total,")"]})]})]})]})}),e.jsxs("div",{className:"mb-6 flex flex-col gap-4 sm:flex-row",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(K,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search changes...",value:u,onChange:s=>P(s.target.value),className:"w-full rounded-lg border border-gray-700 bg-gray-800/50 py-3 pl-10 pr-4 text-white placeholder-gray-500 backdrop-blur-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20"})]}),e.jsxs("select",{value:h,onChange:s=>U(s.target.value),className:"w-full rounded-lg border border-gray-700 bg-gray-800/50 px-4 py-3 text-sm text-white backdrop-blur-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 sm:w-auto",children:[e.jsx("option",{value:"all",children:"All Pages"}),R.map(s=>e.jsx("option",{value:s.toLowerCase(),children:s},s))]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:flex",children:[e.jsxs("button",{onClick:()=>w("all"),className:`flex items-center justify-center gap-1.5 rounded-lg px-3 py-2.5 text-xs transition-all sm:gap-2 sm:px-4 sm:py-3 sm:text-sm ${x==="all"?"bg-blue-500 text-white":"bg-gray-800/50 text-gray-400 hover:bg-gray-700/50"}`,children:[e.jsx(V,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"All"})]}),e.jsxs("button",{onClick:()=>w("text"),className:`flex items-center justify-center gap-1.5 rounded-lg px-3 py-2.5 text-xs transition-all sm:gap-2 sm:px-4 sm:py-3 sm:text-sm ${x==="text"?"bg-purple-500 text-white":"bg-gray-800/50 text-gray-400 hover:bg-gray-700/50"}`,children:[e.jsx(v,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Text"})]}),e.jsxs("button",{onClick:()=>w("image"),className:`flex items-center justify-center gap-1.5 rounded-lg px-3 py-2.5 text-xs transition-all sm:gap-2 sm:px-4 sm:py-3 sm:text-sm ${x==="image"?"bg-pink-500 text-white":"bg-gray-800/50 text-gray-400 hover:bg-gray-700/50"}`,children:[e.jsx(k,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Images"})]})]})]}),j?e.jsx("div",{className:"flex items-center justify-center py-8 sm:py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(E,{className:"mx-auto h-10 w-10 animate-spin text-blue-400 sm:h-12 sm:w-12"}),e.jsx("p",{className:"mt-3 text-sm text-gray-400 sm:mt-4 sm:text-base",children:"Loading changes..."})]})}):Object.keys($).length===0?e.jsxs("div",{className:"rounded-xl border border-gray-700/50 bg-gray-800/30 p-8 text-center backdrop-blur-sm sm:p-12",children:[e.jsx(L,{className:"mx-auto h-12 w-12 text-green-400 sm:h-16 sm:w-16"}),e.jsx("h3",{className:"mt-3 text-lg font-semibold text-white sm:mt-4 sm:text-xl",children:"No Changes Found"}),e.jsx("p",{className:"mt-2 text-xs text-gray-400 sm:text-sm",children:u||h!=="all"||x!=="all"?"Try adjusting your filters":"Everything is at original defaults - no customizations made yet!"})]}):e.jsx("div",{className:"space-y-4 sm:space-y-6",children:Object.entries($).map(([s,a])=>e.jsxs("div",{className:"rounded-xl border border-gray-700/50 bg-gray-800/30 p-4 backdrop-blur-sm sm:p-6",children:[e.jsxs("div",{className:"mb-4 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h2",{className:"text-xl font-bold text-white sm:text-2xl",children:[s," Page"]}),e.jsxs("p",{className:"text-xs text-gray-400 sm:text-sm",children:[a.length," change",a.length!==1?"s":""]})]}),e.jsxs("button",{onClick:()=>M(s),disabled:p,className:"flex w-full items-center justify-center gap-2 rounded-lg bg-orange-500 px-3 py-2.5 text-xs font-semibold text-white transition-all hover:bg-orange-600 disabled:opacity-50 sm:w-auto sm:px-4 sm:py-2 sm:text-sm",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{children:"Reset Page"})]})]}),e.jsx("div",{className:"space-y-3",children:a.map(t=>e.jsx("div",{className:"rounded-lg border border-gray-700/50 bg-gray-900/50 p-3 transition-all hover:border-gray-600 sm:p-4",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:gap-4",children:[t.type==="image"&&t.image?e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:q(t.image),alt:"Preview",className:"h-16 w-16 rounded-lg object-cover sm:h-20 sm:w-20",onError:i=>{const d=i.currentTarget;if(d.src&&d.src.includes("assets.cahayaanbiya.com")){const c=d.src;let g=c;c.includes("/public/images/")?g=c.replace("/public/images/","/images/"):c.includes("/public/")?g=c.replace("/public/","/"):c.includes("/images/")?g=c.replace("/images/","/public/images/"):g=`https://assets.cahayaanbiya.com/public/images/${c.split("/").pop()||t.image}`,console.log("[Restore Center Image] Trying alternative R2 path:",g),d.src=g}}})}):null,e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs font-medium ${t.type==="image"?"bg-pink-500/20 text-pink-400 border border-pink-500/30":"bg-purple-500/20 text-purple-400 border border-purple-500/30"}`,children:[t.type==="image"?e.jsx(k,{className:"h-3 w-3"}):e.jsx(v,{className:"h-3 w-3"}),t.type]}),e.jsxs("h3",{className:"text-sm font-semibold text-white sm:text-base",children:[t.section," - ",t.field]})]}),e.jsx("p",{className:"mt-1 truncate text-xs text-gray-500 sm:text-sm",children:t.key}),t.type==="text"&&t.content&&e.jsx("p",{className:"mt-2 line-clamp-2 text-xs text-gray-300 sm:text-sm",children:t.content}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(X,{className:"h-3 w-3"}),t.updated_at_human]})]}),e.jsxs("button",{onClick:()=>F(t.key,`${t.section} - ${t.field}`),disabled:p,className:"flex w-full items-center justify-center gap-2 rounded-lg bg-purple-500 px-3 py-2.5 text-xs font-semibold text-white transition-all hover:bg-purple-600 disabled:opacity-50 sm:w-auto sm:px-4 sm:py-2 sm:text-sm",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{children:"Reset"})]})]})},t.id))})]},s))})]})})]})}export{le as default};
