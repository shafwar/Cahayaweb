import{j as e,A as x,m as f}from"./app-DZXnkRRh.js";import{d as R,r as o,a as S,b as L,H as E}from"./inertia-B5_hUOTa.js";import{u as P}from"./GlobalHeader-wafOHL2D.js";import{E as r}from"./EditableText-D-dz2Mli.js";import{P as T}from"./public-layout-igg_18IB.js";/* empty css            */import"./vendor-DP3lGzMr.js";import"./logout-D_gNzJQz.js";import"./index-CgIgS3lo.js";import"./createLucideIcon-DafRaREU.js";import"./x-CZujUxXT.js";import"./EditToggleButton-CjZvk9ec.js";function U({sectionKey:i,src:t,alt:b,className:j,imgClassName:v}){const{isAdmin:n,editMode:c,markDirty:p}=P(),{props:y}=R(),h=y.sections?.[i]?.image,[D,m]=o.useState(void 0),[N,u]=o.useState(!1),g=o.useRef(null),k=D??h??t??"",d=o.useCallback(async a=>{const s=URL.createObjectURL(a);m(s),p();const l=new FormData;l.append("key",i),l.append("image",a);try{await S.post("/admin/upload-image",l,{headers:{"Content-Type":"multipart/form-data"}}),u(!0),setTimeout(()=>u(!1),900),URL.revokeObjectURL(s),m(void 0),L.reload({only:["sections"],onSuccess:()=>{console.log("✅ Image reloaded from database:",i)}})}catch(C){console.error("Failed to upload image:",C),URL.revokeObjectURL(s),m(void 0)}},[i,p]),w=o.useCallback(a=>{const s=a.target.files?.[0];s&&d(s)},[d]);return e.jsxs("div",{className:`group relative ${j??""}`,onDragOver:a=>c&&n?(a.preventDefault(),a.dataTransfer.dropEffect="copy"):void 0,onDrop:a=>{if(!(c&&n))return;a.preventDefault();const s=a.dataTransfer.files?.[0];s&&d(s)},children:[e.jsx("img",{src:k,alt:b,className:v}),e.jsx(x,{children:n&&c&&e.jsxs(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 grid place-items-center rounded-md bg-black/30 ring-2 ring-blue-400/50",onClick:()=>g.current?.click(),children:[e.jsx("span",{className:"rounded bg-white/90 px-3 py-1 text-xs font-medium text-gray-800",children:"Drag & Drop image or Click to replace"}),e.jsx("input",{ref:g,type:"file",accept:"image/png,image/jpeg",className:"hidden",onChange:w})]})}),e.jsx(x,{children:N&&e.jsx(f.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:8},className:"absolute -bottom-6 left-0 z-50 rounded bg-black/80 px-2 py-1 text-xs text-emerald-300",children:"Image saved ✓"})})]})}function G(){const i=[{id:1,name:"Arab Saudi",description:"Spiritual journey to the Holy Land",image:"/arabsaudi.jpg"},{id:2,name:"Dubai",description:"Modern wonders & desert adventures",image:"/dubai1.jpeg"}];return e.jsxs(T,{children:[e.jsx(E,{title:"CMS Demo Destinations"}),e.jsxs("div",{className:"mx-auto max-w-6xl px-6 py-10",children:[e.jsx(r,{sectionKey:"cms.demo.title",value:"CMS Demo Destinations",tag:"h1",className:"text-3xl font-bold"}),e.jsx("p",{className:"mt-2 text-gray-500",children:e.jsx(r,{sectionKey:"cms.demo.subtitle",value:"Try editing texts and replacing images inline. Only admins see the controls.",tag:"span"})}),e.jsx("div",{className:"mt-8 grid grid-cols-1 gap-6 sm:grid-cols-2",children:i.map(t=>e.jsxs("div",{className:"overflow-hidden rounded-xl border border-white/10 bg-black/50",children:[e.jsx(U,{sectionKey:`cms.demo.dest.${t.id}.image`,src:t.image,alt:t.name,imgClassName:"h-56 w-full object-cover"}),e.jsxs("div",{className:"p-4",children:[e.jsx(r,{sectionKey:`cms.demo.dest.${t.id}.name`,value:t.name,tag:"h3",className:"text-lg font-semibold text-white"}),e.jsx(r,{sectionKey:`cms.demo.dest.${t.id}.desc`,value:t.description,tag:"p",className:"mt-1 text-sm text-gray-300"})]})]},t.id))})]})]})}export{G as default};
